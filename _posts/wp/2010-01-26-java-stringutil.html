---
layout: post
title: Java StringUtil
categories:
- Java Core
tags:
- Java Core
- String
published: true
comments: true
---
<p>关于字符串的一些常用工具方法：
<!--more-->
<pre lang="java">package com.javachen.util.string;</pre></p>

<p>import java.util.regex.Pattern;</p>

<p>/**<br />
 *<br />
 * @author javachen<br />
 * @date 2010.1.26<br />
 */<br />
public class StringUtil {<br />
	public static String escape(String src) {<br />
		int i;<br />
		char j;<br />
		StringBuffer tmp = new StringBuffer();<br />
		tmp.ensureCapacity(src.length() * 6);<br />
		for (i = 0; i &lt; src.length(); i++) {<br />
			j = src.charAt(i);<br />
			if (Character.isDigit(j) || Character.isLowerCase(j)<br />
					|| Character.isUpperCase(j))<br />
				tmp.append(j);<br />
			else if (j &lt; 256) {<br />
				tmp.append("%");<br />
				if (j &lt; 16)<br />
					tmp.append("0");<br />
				tmp.append(Integer.toString(j, 16));<br />
			} else {<br />
				tmp.append("%u");<br />
				tmp.append(Integer.toString(j, 16));<br />
			}<br />
		}<br />
		return tmp.toString();<br />
	}</p>

<p>	public static String unescape(String src) {<br />
		StringBuffer tmp = new StringBuffer();<br />
		tmp.ensureCapacity(src.length());<br />
		int lastPos = 0, pos = 0;<br />
		char ch;<br />
		while (lastPos &lt; src.length()) {<br />
			pos = src.indexOf("%", lastPos);<br />
			if (pos == lastPos) {<br />
				if (src.charAt(pos + 1) == 'u') {<br />
					ch = (char) Integer.parseInt(src<br />
							.substring(pos + 2, pos + 6), 16);<br />
					tmp.append(ch);<br />
					lastPos = pos + 6;<br />
				} else {<br />
					ch = (char) Integer.parseInt(src<br />
							.substring(pos + 1, pos + 3), 16);<br />
					tmp.append(ch);<br />
					lastPos = pos + 3;<br />
				}<br />
			} else {<br />
				if (pos == -1) {<br />
					tmp.append(src.substring(lastPos));<br />
					lastPos = src.length();<br />
				} else {<br />
					tmp.append(src.substring(lastPos, pos));<br />
					lastPos = pos;<br />
				}<br />
			}<br />
		}<br />
		return tmp.toString();<br />
	}</p>

<p>	/**<br />
	 * 将字符串 source 中的 oldStr 替换为 newStr, 并以大小写敏感方式进行查找<br />
	 *<br />
	 * @param source<br />
	 *            需要替换的源字符串<br />
	 * @param oldStr<br />
	 *            需要被替换的老字符串<br />
	 * @param newStr<br />
	 *            替换为的新字符串<br />
	 */<br />
	public static String replace(String source, String oldStr, String newStr) {<br />
		return replace(source, oldStr, newStr, true);<br />
	}</p>

<p>	/**<br />
	 * 将字符串 source 中的 oldStr 替换为 newStr, matchCase 为是否设置大小写敏感查找<br />
	 *<br />
	 * @param source<br />
	 *            需要替换的源字符串<br />
	 * @param oldStr<br />
	 *            需要被替换的老字符串<br />
	 * @param newStr<br />
	 *            替换为的新字符串<br />
	 * @param matchCase<br />
	 *            是否需要按照大小写敏感方式查找<br />
	 */<br />
	public static String replace(String source, String oldStr, String newStr,<br />
			boolean matchCase) {<br />
		if (source == null) {<br />
			return null;<br />
		}<br />
		// 首先检查旧字符串是否存在, 不存在就不进行替换<br />
		if (source.toLowerCase().indexOf(oldStr.toLowerCase()) == -1) {<br />
			return source;<br />
		}<br />
		int findStartPos = 0;<br />
		int a = 0;<br />
		while (a &gt; -1) {<br />
			int b = 0;<br />
			String str1, str2, str3, str4, strA, strB;<br />
			str1 = source;<br />
			str2 = str1.toLowerCase();<br />
			str3 = oldStr;<br />
			str4 = str3.toLowerCase();<br />
			if (matchCase) {<br />
				strA = str1;<br />
				strB = str3;<br />
			} else {<br />
				strA = str2;<br />
				strB = str4;<br />
			}<br />
			a = strA.indexOf(strB, findStartPos);<br />
			if (a &gt; -1) {<br />
				b = oldStr.length();<br />
				findStartPos = a + b;<br />
				StringBuffer bbuf = new StringBuffer(source);<br />
				source = bbuf.replace(a, a + b, newStr) + "";<br />
				// 新的查找开始点位于替换后的字符串的结尾<br />
				findStartPos = findStartPos + newStr.length() - b;<br />
			}<br />
		}<br />
		return source;<br />
	}</p>

<p>	/**<br />
	 * 清除字符串结尾的空格.<br />
	 *<br />
	 * @param input<br />
	 *            String 输入的字符串<br />
	 * @return 转换结果<br />
	 */<br />
	public static String trimTailSpaces(String input) {<br />
		if (isEmpty(input)) {<br />
			return "";<br />
		}</p>

<p>		String trimedString = input.trim();<br />
		if (trimedString.length() == input.length()) {<br />
			return input;<br />
		}<br />
		return input.substring(0, input.indexOf(trimedString)<br />
				+ trimedString.length());<br />
	}</p>

<p>	/**<br />
	 * Change the null string value to "", if not null, then return it self, use<br />
	 * this to avoid display a null string to "null".<br />
	 *<br />
	 * @param input<br />
	 *            the string to clear<br />
	 * @return the result<br />
	 */<br />
	public static String clearNull(String input) {<br />
		return isEmpty(input) ? "" : input;<br />
	}</p>

<p>	/**<br />
	 * Return the limited length string of the input string (added at:April 10,<br />
	 * 2004).<br />
	 *<br />
	 * @param input<br />
	 *            String<br />
	 * @param maxLength<br />
	 *            int<br />
	 * @return String processed result<br />
	 */<br />
	public static String limitStringLength(String input, int maxLength) {<br />
		if (isEmpty(input))<br />
			return "";</p>

<p>		if (input.length() &lt; = maxLength) {<br />
			return input;<br />
		} else {<br />
			return input.substring(0, maxLength - 3) + "...";<br />
		}</p>

<p>	}</p>

<p>	/**<br />
	 * 判断字符串是否全是数字字符.<br />
	 *<br />
	 * @param input<br />
	 *            输入的字符串<br />
	 * @return 判断结果, true 为全数字, false 为还有非数字字符<br />
	 */<br />
	public static boolean isNumeric(String input) {<br />
		if (isEmpty(input)) {<br />
			return false;<br />
		}</p>

<p>		for (int i = 0; i &lt; input.length(); i++) {<br />
			char charAt = input.charAt(i);</p>

<p>			if (!Character.isDigit(charAt)) {<br />
				return false;<br />
			}<br />
		}<br />
		return true;<br />
	}</p>

<p>	/**<br />
	 * 转换由表单读取的数据的内码(从 ISO8859 转换到 gb2312).<br />
	 *<br />
	 * @param input<br />
	 *            输入的字符串<br />
	 * @return 转换结果, 如果有错误发生, 则返回原来的值<br />
	 */<br />
	public static String ISO2GBK(String input) {<br />
		try {<br />
			byte[] bytes = input.getBytes("ISO8859-1");<br />
			return new String(bytes, "GBK");<br />
		} catch (Exception ex) {<br />
		}<br />
		return input;<br />
	}</p>

<p>	/**<br />
	 * 转换由表单读取的数据的内码到 ISO(从 GBK 转换到ISO8859-1).<br />
	 *<br />
	 * @param input<br />
	 *            输入的字符串<br />
	 * @return 转换结果, 如果有错误发生, 则返回原来的值<br />
	 */<br />
	public static String GBK2ISO(String input) {<br />
		return changeEncoding(input, "GBK", "ISO8859-1");<br />
	}</p>

<p>	/**<br />
	 * 转换字符串的内码.<br />
	 *<br />
	 * @param input<br />
	 *            输入的字符串<br />
	 * @param sourceEncoding<br />
	 *            源字符集名称<br />
	 * @param targetEncoding<br />
	 *            目标字符集名称<br />
	 * @return 转换结果, 如果有错误发生, 则返回原来的值<br />
	 */<br />
	public static String changeEncoding(String input, String sourceEncoding,<br />
			String targetEncoding) {<br />
		if (input == null || input.equals("")) {<br />
			return input;<br />
		}</p>

<p>		try {<br />
			byte[] bytes = input.getBytes(sourceEncoding);<br />
			return new String(bytes, targetEncoding);<br />
		} catch (Exception ex) {<br />
		}<br />
		return input;<br />
	}</p>

<p>	/**<br />
	 * 将单个的 ' 换成 ''; SQL 规则:如果单引号中的字符串包含一个嵌入的引号,可以使用两个单引号表示嵌入的单引号.<br />
	 */</p>

<p>	public static String replaceSql(String input) {<br />
		return replace(input, "'", "''");<br />
	}</p>

<p>	/**<br />
	 * 对给定字符进行 URL 编码<br />
	 */<br />
	public static String encode(String value) {<br />
		if (isEmpty(value)) {<br />
			return "";<br />
		}</p>

<p>		try {<br />
			value = java.net.URLEncoder.encode(value, "GB2312");<br />
		} catch (Exception ex) {<br />
			ex.printStackTrace();<br />
		}</p>

<p>		return value;<br />
	}</p>

<p>	/**<br />
	 * 对给定字符进行 URL 解码<br />
	 *<br />
	 * @param value<br />
	 *            解码前的字符串<br />
	 * @return 解码后的字符串<br />
	 */<br />
	public static String decode(String value) {<br />
		if (isEmpty(value)) {<br />
			return "";<br />
		}</p>

<p>		try {<br />
			return java.net.URLDecoder.decode(value, "GB2312");<br />
		} catch (Exception ex) {<br />
			ex.printStackTrace();<br />
		}</p>

<p>		return value;<br />
	}</p>

<p>	/**<br />
	 * 判断字符串是否未空, 如果为 null 或者长度为0, 均返回 true.<br />
	 */<br />
	public static boolean isEmpty(String input) {<br />
		return (input == null || input.length() == 0);<br />
	}</p>

<p>	/**<br />
	 * 获得输入字符串的字节长度(即二进制字节数), 用于发送短信时判断是否超出长度.<br />
	 *<br />
	 * @param input<br />
	 *            输入字符串<br />
	 * @return 字符串的字节长度(不是 Unicode 长度)<br />
	 */<br />
	public static int getBytesLength(String input) {<br />
		if (input == null) {<br />
			return 0;<br />
		}</p>

<p>		int bytesLength = input.getBytes().length;<br />
		return bytesLength;<br />
	}</p>

<p>	/**<br />
	 * 检验字符串是否未空, 如果是, 则返回给定的出错信息.<br />
	 *<br />
	 * @param input<br />
	 *            输入的字符串<br />
	 * @param errorMsg<br />
	 *            出错信息<br />
	 * @return 空串返回出错信息<br />
	 */<br />
	public static String isEmpty(String input, String errorMsg) {<br />
		if (isEmpty(input)) {<br />
			return errorMsg;<br />
		}<br />
		return "";<br />
	}</p>

<p>	/**<br />
	 * 判断是否为质数<br />
	 *<br />
	 * @param x<br />
	 * @return<br />
	 */<br />
	public static boolean isPrime(int x) {<br />
		if (x &lt;= 7) {<br />
			if (x == 2 || x == 3 || x == 5 || x == 7)<br />
				return true;<br />
		}<br />
		int c = 7;<br />
		if (x % 2 == 0)<br />
			return false;<br />
		if (x % 3 == 0)<br />
			return false;<br />
		if (x % 5 == 0)<br />
			return false;<br />
		int end = (int) Math.sqrt(x);<br />
		while (c &lt;= end) {<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 4;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 2;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 4;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 2;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 4;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 6;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 2;<br />
			if (x % c == 0) {<br />
				return false;<br />
			}<br />
			c += 6;<br />
		}<br />
		return true;<br />
	}</p>

<p>	/**<br />
	 * 返回指定字节长度的字符串<br />
	 *<br />
	 * @param str<br />
	 *            String 字符串<br />
	 * @param length<br />
	 *            int 指定长度<br />
	 * @return String 返回的字符串<br />
	 */<br />
	public static String toLength(String str, int length) {<br />
		if (str == null) {<br />
			return null;<br />
		}<br />
		if (length &lt;= 0) {<br />
			return "";<br />
		}<br />
		try {<br />
			if (str.getBytes("GBK").length &lt;= length) {<br />
				return str;<br />
			}<br />
		} catch (Exception ex) {<br />
		}<br />
		StringBuffer buff = new StringBuffer();</p>

<p>		int index = 0;<br />
		char c;<br />
		length -= 3;<br />
		while (length &gt; 0) {<br />
			c = str.charAt(index);<br />
			if (c &lt; 128) {<br />
				length--;<br />
			} else {<br />
				length--;<br />
				length--;<br />
			}<br />
			buff.append(c);<br />
			index++;<br />
		}<br />
		buff.append("...");<br />
		return buff.toString();<br />
	}</p>

<p>	/**<br />
	 * 判断是否为整数<br />
	 *<br />
	 * @param str<br />
	 *            传入的字符串<br />
	 * @return 是整数返回true,否则返回false<br />
	 */<br />
	public static boolean isInteger(String str) {<br />
		Pattern pattern = Pattern.compile("^[-\\+]?[\\d]*$");<br />
		return pattern.matcher(str).matches();<br />
	}</p>

<p>	/**<br />
	 * 判断是否为浮点数，包括double和float<br />
	 *<br />
	 * @param str<br />
	 *            传入的字符串<br />
	 * @return 是浮点数返回true,否则返回false<br />
	 */<br />
	public static boolean isDouble(String str) {<br />
		Pattern pattern = Pattern.compile("^[-\\+]?[.\\d]*$");<br />
		return pattern.matcher(str).matches();<br />
	}</p>

<p>	/**<br />
	 * 判断输入的字符串是否符合Email样式.<br />
	 *<br />
	 * @param str<br />
	 *            传入的字符串<br />
	 * @return 是Email样式返回true,否则返回false<br />
	 */<br />
	public static boolean isEmail(String str) {<br />
		Pattern pattern = Pattern<br />
				.compile("^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$");<br />
		return pattern.matcher(str).matches();<br />
	}</p>

<p>	/**<br />
	 * 判断输入的字符串是否为纯汉字<br />
	 *<br />
	 * @param str<br />
	 *            传入的字符窜<br />
	 * @return 如果是纯汉字返回true,否则返回false<br />
	 */<br />
	public static boolean isChinese(String str) {<br />
		Pattern pattern = Pattern.compile("[\u0391-\uFFE5]+$");<br />
		return pattern.matcher(str).matches();<br />
	}<br />
}

Big5字与Unicode的互换:
<pre lang="java">public static String big5ToUnicode(String s){
        try{
            return new String(s.getBytes("ISO8859_1"), "Big5");
        }
        catch (UnsupportedEncodingException uee){
            return s;
        }
    }</pre></p>

<p>    public static String UnicodeTobig5(String s){<br />
        try{<br />
            return new String(s.getBytes("Big5"), "ISO8859_1");<br />
        }<br />
        catch (UnsupportedEncodingException uee){<br />
            return s;<br />
        }<br />
    }</p>

<p>    public static String toHexString(String s){<br />
        String str="";<br />
        for (int i=0; i
转译特殊符号标签:
<pre lang="java">public static String filter(String value)
        {
            if(value == null || value.length() == 0)
                return value;
            StringBuffer result = null;
            String filtered = null;
            for(int i = 0; i &lt; value.length(); i++)
            {
                filtered = null;
                switch(value.charAt(i))
                {
                case 60: // '&lt;'
                    filtered = "&lt;";
                    break;</pre></p>

<p>                case 62: // '&gt;'<br />
                    filtered = "&gt;";<br />
                    break;</p>

<p>                case 38: // '&amp;'<br />
                    filtered = "&amp;";<br />
                    break;</p>

<p>                case 34: // '"'<br />
                    filtered = """;<br />
                    break;</p>

<p>                case 39: // '\''<br />
                    filtered = "'";<br />
                    break;<br />
                }<br />
                if(result == null)<br />
                {<br />
                    if(filtered != null)<br />
                    {<br />
                        result = new StringBuffer(value.length() + 50);<br />
                        if(i &gt; 0)<br />
                            result.append(value.substring(0, i));<br />
                        result.append(filtered);<br />
                    }<br />
                } else<br />
                if(filtered == null)<br />
                    result.append(value.charAt(i));<br />
                else<br />
                    result.append(filtered);<br />
            }</p>

<p>            return result != null ? result.toString() : value;<br />
        }

判断字符是否属于中文 :
<pre lang="java">//  GENERAL_PUNCTUATION 判断中文的“号
 //  CJK_SYMBOLS_AND_PUNCTUATION 判断中文的。号
 //  HALFWIDTH_AND_FULLWIDTH_FORMS 判断中文的，号
   public static boolean isChinese(char c) {
      Character.UnicodeBlock ub = Character.UnicodeBlock.of(c);
      if (ub == Character.UnicodeBlock.CJK_UNIFIED_IDEOGRAPHS
        || ub == Character.UnicodeBlock.CJK_COMPATIBILITY_IDEOGRAPHS
        || ub == Character.UnicodeBlock.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A
        || ub == Character.UnicodeBlock.GENERAL_PUNCTUATION
        || ub == Character.UnicodeBlock.CJK_SYMBOLS_AND_PUNCTUATION
        || ub == Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS){
       return true;
      }
      return false;
   }
   public static void isChinese(String strName) {
      char[] ch = strName.toCharArray();
      for (int i = 0; i &lt; ch.length; i++) {
    char c = ch[i];
    if(isChinese(c)==true){
     System.out.println(isChinese(c));
    return;
   }else{
     System.out.println(isChinese(c));
     return ;
    }
   }
   }
</pre>
人民币转成大写 :
<pre lang="java">/**
     * 人民币转成大写
     *
     * @param value
     * @return String
     */
    public static String hangeToBig(double value)
    {
        char[] hunit = { '拾', '佰', '仟' }; // 段内位置表示
        char[] vunit = { '万', '亿' }; // 段名表示
        char[] digit = { '零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖' }; // 数字表示
        long midVal = (long) (value * 100); // 转化成整形
        String valStr = String.valueOf(midVal); // 转化成字符串</pre></p>

<p>        String head = valStr.substring(0, valStr.length() - 2); // 取整数部分<br />
        String rail = valStr.substring(valStr.length() - 2); // 取小数部分</p>

<p>        String prefix = ""; // 整数部分转化的结果<br />
        String suffix = ""; // 小数部分转化的结果<br />
        // 处理小数点后面的数<br />
        if (rail.equals("00"))<br />
        { // 如果小数部分为0<br />
            suffix = "整";<br />
        }<br />
        else<br />
        {<br />
            suffix = digit[rail.charAt(0) - '0'] + "角" + digit[rail.charAt(1) - '0'] + "分"; // 否则把角分转化出来<br />
        }<br />
        // 处理小数点前面的数<br />
        char[] chDig = head.toCharArray(); // 把整数部分转化成字符数组<br />
        char zero = '0'; // 标志'0'表示出现过0<br />
        byte zeroSerNum = 0; // 连续出现0的次数<br />
        for (int i = 0; i &lt; chDig.length; i++)<br />
        { // 循环处理每个数字<br />
            int idx = (chDig.length - i - 1) % 4; // 取段内位置<br />
            int vidx = (chDig.length - i - 1) / 4; // 取段位置<br />
            if (chDig[i] == '0')<br />
            { // 如果当前字符是0<br />
                zeroSerNum++; // 连续0次数递增<br />
                if (zero == '0')<br />
                { // 标志<br />
                    zero = digit[0];<br />
                }<br />
                else if (idx == 0 &amp;&amp; vidx &gt; 0 &amp;&amp; zeroSerNum &lt; 4)<br />
                {<br />
                    prefix += vunit[vidx - 1];<br />
                    zero = '0';<br />
                }<br />
                continue;<br />
            }<br />
            zeroSerNum = 0; // 连续0次数清零<br />
            if (zero != '0')<br />
            { // 如果标志不为0,则加上,例如万,亿什么的<br />
                prefix += zero;<br />
                zero = '0';<br />
            }<br />
            prefix += digit[chDig[i] - '0']; // 转化该数字表示<br />
            if (idx &gt; 0)<br />
                prefix += hunit[idx - 1];<br />
            if (idx == 0 &amp;&amp; vidx &gt; 0)<br />
            {<br />
                prefix += vunit[vidx - 1]; // 段结束位置应该加上段名如万,亿<br />
            }<br />
        }</p>

<p>        if (prefix.length() &gt; 0)<br />
            prefix += '圆'; // 如果整数部分存在,则有圆的字样<br />
        return prefix + suffix; // 返回正确表示<br />
    }
</p>
