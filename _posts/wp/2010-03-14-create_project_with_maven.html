---
layout: post
title: 使用maven建立基本开发结构
categories:
- OpenSource
tags:
- maven
- Open Sources
published: true
comments: true
---
<p>在研究Struts2时候，看到用maven建立基本开发结构，感到很陌生，决定查查资料，熟悉maven，于是有了这篇入门文章熟悉maven的一些概念。由于最近的项目还没有用到maven，所以打算只是简单了解Maven，方便以后查阅之用。</p>

<p>建议初学者看看这篇文章：<a href="http://holylin.javaeye.com/blog/25527">http://holylin.javaeye.com/blog/25527</a><!--more--></p>

<p><span style="color: #0000ff;"><strong>Maven</strong></span></p>

<p>Maven是基于项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的软件项目管理工具.<br />
如果你已经有十次输入同样的Ant  targets来编译你的代码、jar或者war、生成javadocs，你一定会自问，是否有有一个重复性更少却能同样完成该工作的方法。Maven便 提供了这样一种选择，将你的注意力从作业层转移到项目管理层。Maven项目已经能够知道如何构建和捆绑代码，运行测试，生成文档并宿主项目网页.</p>

<p>Maven是一个项目管理工具，它包含了一个项目对象模型 (Project Object  Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management   System)，和用来运行定义在生命周期阶段(phase)中插件(plugin)目标(goal)的逻辑。当你使用Maven的时候，你用一个明确定 义的项目对象模型来描述你的项目，然后Maven可以应用横切的逻辑，这些逻辑来自一组共享的（或者自定义的）插件。<br />
Maven 有一个生命周期，当你运行 mvn install 的时候被调用。这条命令告诉  Maven 执行一系列的有序的步骤，直到到达你指定的生命周期。遍历生命周期旅途中的一个影响就是，Maven  运行了许多默认的插件目标，这些目标完成了像编译和创建一个 JAR 文件这样的工作。</p>

<p><span style="color: #0000ff;"><strong>常见的名称概念</strong></span></p>

<p>Project：任 何您想build的事物，Maven都可以认为它们是工程。这些工程被定义为工程对象模型(POM，Poject Object Model)。一个工程可以依赖其它的工程；一个工程也可以由多个子工程构成。<br />
POM：POM(pom.xml) 是Maven的核心文件，它是指示Maven如何工作的元数据文件，类似于Ant中的build.xml文件。POM文件位于每个工程的根目录中。<br />
GroupId：groupId是一个工程的在全局中唯一的标识符，一般地，它就是工程名。groupId有利于使 用一个完全的包名，将一个工程从其它有类似名称的工程里区别出来。<br />
Artifact：artifact 是工程将要产生或需要使用的文件，它可以是jar文件，源文件，二进制文件，war文件，甚至是pom文件。每个artifact都由groupId和 artifactId组合的标识符唯一识别。需要被使用(依赖)的artifact都要放在仓库(见Repository)中，否则Maven无法找到 (识别)它们。<br />
Dependency：为了能够build或运行，一个典型的Java工程会依赖其 它的包。在Maven中，这些被依赖的包就被称为dependency。dependency一般是其它工程的artifact。<br />
Plug-in：Maven 是由插件组织的，它的每一个功能都是由插件提供的。插件提供goal(类似于Ant中的target)，并根据在POM中找到的元数据去完成工作。主要的 Maven插件要是由Java写成的，但它也支持用Beanshell或Ant脚本写成的插件。<br />
Repository： 仓库用于存放artifact，它可以是本地仓库，也可以是远程仓库。Maven有一个默认的远程仓库--central，可以从http://www.ibiblio.org/maven/下载其中的artifact。在 Windows平台上，本地仓库的默认地址是User_Home\.m2\repository。<br />
Snapshot：工程中可以(也应该)有一个特殊版本，它的版本号包括SNAPSHOT字样。 该版本可以告诉Maven，该工程正处于开发阶段，会经常更新(但还未发布)。当其它工程使用此类型版本的artifact时，Maven会在仓库中寻找 该artifact的最新版本，并自动下载、使用该最新版。</p>

<p><span style="color: #0000ff;"><strong>生命周期</strong></span></p>

<p>软件项目一般都有相似的开发过程：准备，编译，测试，打包和部署，Maven将上述过程称为Build Life Cycle。在Maven中，这些生命周期由一系列的短语组成，每个短语对应着一个(或多个)操作；或对应着一个(或多个)goal(类似于Ant中的 target)。<br />
如编译源文件的命令mvn compile中的 compile是一个生命周期短语。同时该命令也可以等价于mvn compiler:compile， 其中的compiler是一个插件，它提供了compile(此compile与mvn compile中的compile意义不同)goal；compiler 还可提供另一个goal--testCompile，该goal用于编译junit测试类。<br />
在执行某一个生命周期时，Maven会首先执行该生命周期之前的其它周期。如要执行compile，那么将首先执行validate，generate- source，process-source和generate-resources，最后再执行compile本身。</p>

<p><span style="color: #0000ff;"><strong>Maven的原理 </strong></span>
作为构建工具，Maven和Ant一样，利用构建配置文件进行编译，打包，测试等操作。您可以用Maven自带的功能进行任何的操作，但前提是做好了相应 的配置。当然，修改已有的模板来开始新的项目是个好方法。除非您在写特有的task，不然都会有target重用的问题。<br />
Maven进行了一些改进。您将项目配置内容写成XML文件，并且可以使用很多Maven自带的功能。另外还可以在Maven项目中调用任何Ant的 task。<br />
Maven自带的"goals"有以下功能:<br />
编译源代码<br />
产生Javadoc文档<br />
运行unit测试<br />
源代码文法分析<br />
产生违反团队编码规范的详细报告<br />
产生CVS最新提交报告<br />
产生CVS更改最频繁的文件报告和提交最频繁的开发人员报告<br />
产生可以交叉引用的HTML格式的源代码，等等。</p>
