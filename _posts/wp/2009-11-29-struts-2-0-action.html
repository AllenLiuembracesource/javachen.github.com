---
layout: post
title: Struts 2.0中的Action
categories:
- Struts
tags:
- Struts
- Struts2
published: true
comments: true
---
<p><img class="alignright size-full wp-image-675" title="itman" src="http://www.javachen.com/wp-content/uploads/2009/11/itman.gif" alt="itman" width="100" height="67" />和Struts 1.x一样，Struts 2.0中的Action类是其核心内容，只是两者在Action模型上有很大的区别。
<table style="border-top: 2px solid #008000; border-bottom: 2px solid #008000; text-align: left;" border="0" cellspacing="0" cellpadding="4">
<tbody>
<tr>
<td style="border-bottom: 1px solid #008000; font-weight: bold; height: 21px; background-color: #ccffcc;"></td>
<td style="border-bottom: 1px solid #008000; font-weight: bold; height: 21px; background-color: #ccffcc;">Struts 1.x</td>
<td style="border-bottom: 1px solid #008000; font-weight: bold; height: 21px; background-color: #ccffcc;">Stuts 2.0</td>
</tr>
<tr>
<td>接口</td>
<td>必须继承org.apache.struts.action.Action或者其子类</td>
<td>无须继承任何类型或实现任何接口</td>
</tr>
<tr>
<td>表单数据</td>
<td>表单数据封装在FormBean中</td>
<td>表单数据包含在Action中，通过Getter和Setter获取</td>
</tr>
</tbody>
</table>
理论上Struts 2.0的Action无须实现任何接口或继承任何类型，但是，我们为了方便实现Action，大多数情况下都会继承 com.opensymphony.xwork2.ActionSupport类，并重载（Override）此类里的String execute()方法。<!--more--></p>

<p>参考API，可发现<a href="http://www.opensymphony.com/webwork/api/com/opensymphony/xwork/ActionSupport.html">ActionSupport</a>类实现了接口：
<ul>
	<li><a href="http://www.opensymphony.com/webwork/api/com/opensymphony/xwork/Action.html">com.opensymphony.xwork2.Action</a></li>
	<li><a href="http://www.opensymphony.com/webwork/api/com/opensymphony/xwork/LocaleProvider.html">com.opensymphony.xwork2.LoaleProvider</a></li>
	<li><a href="http://www.opensymphony.com/webwork/api/com/opensymphony/xwork/TextProvider.html">com.opensymphony.xwork2.TextProvider</a></li>
	<li><a href="http://www.opensymphony.com/webwork/api/com/opensymphony/xwork/Validateable.html">com.opensymphony.xwork2.Validateable</a></li>
	<li><a href="http://www.opensymphony.com/webwork/api/com/opensymphony/xwork/ValidationAware.html">com.opensymphony.xwork2.ValidationAware</a></li>
	<li>com.uwyn.rife.continuations.ContinuableObject</li>
	<li><a href="http://java.sun.com/j2se/1.4/docs/api/java/io/Serializable.html">java.io.Searializable</a></li>
	<li><a href="http://java.sun.com/j2se/1.4/docs/api/java/lang/Cloneable.html">java.lang.Cloneable</a></li>
</ul>
默认情况下，当请求一个action发生时，Struts运行时（Runtime）根据struts.xml里的Action映 射集(Mapping)，实例化action类，并调用其execute方法。当然，我们可以通过以下两种方法改变这种默认调 用。这个功能（Feature）有点类似Struts 1.x中的LookupDispathAction。
<ol>
	<li>在classes/sturts.xml中新建Action，并指明其调用的方法；</li>
	<li>在Action增加一个方法，访问Action时，在Action名后加上“!xxx”（xxx为方法名）</li>
</ol>
实现方法一，在classes/sturts.xml中加入下面代码：
<div style="border: 1px solid #cccccc; padding: 4px 5px 4px 4px; font-size: 13px; width: 98%; background-color: #eeeeee;" /></p>

<p><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">action </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="actionName"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="actionClass"</span><span style="color: #ff0000;"> method</span><span style="color: #0000ff;">="aliasAction"</span><span style="color: #0000ff;">&gt;</span></p>

<p><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">result</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">/index.jsp</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">result</span><span style="color: #0000ff;">&gt;</span></p>

<p><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">action</span><span style="color: #0000ff;">&gt;</span></p>

<p>
实现方法二，在浏览器地址栏中键入http://localhost:8080/Struts2/Alias<span style="color: #0000ff;">actionName</span>.action或 http://localhost:8080/Struts2/<span style="color: #0000ff;">actionName</span>!aliasAction.action地址来访问<span style="color: #0000ff;">actionName </span>Action。</p>

<p>ActionSupport类中<span id="Codehighlighter1_165_389_Open_Text"><span style="color: #000000;">execute()的返回值</span></span>有SUCCESS，ERROR，INPUT，LOGIN，NONE四种，这些常量定义在其接口Action类中。</p>

<p>public interface Action{</p>

<p>//下面定义了5个字符串常量</p>

<p>public static final String SUCCESS = "success";</p>

<p>public static final String NONE = "none";</p>

<p>public static final String ERROR = "error";</p>

<p>public static final String INPUT = "input";</p>

<p>public static final String LOGIN = "login";</p>

<p>//定义处理用户请求的execute抽象方法</p>

<p>public String execute() throws Exception;</p>

<p>}</p>

<p>值得一提的是Struts 2.0中的result不仅仅是Struts 1.x中forward的别名，它可以实现除forward外的很激动人心的功能，如将Action输出到FreeMaker模板、Velocity模 板、JasperReports和使用XSL转换等。这些都过result里的type（类型）属性（Attribute）定义的。另外，您还可以自定义 result类型。</p>

<p>Struts 2.0还可以支持更高级的POJO访问，可以将一些实体类从action中分离出来。这样对我们开发多层系统尤其有用。它可以使系统结构更清晰。</p>
