---
layout: post
title: Web资源优化工具 wro4j
categories:
- OpenSource
tags:
- http
- Open Sources
- wro4j
published: true
comments: true
---
<p>wro4j是一个Web资源优化工具。众所周知，到服务器加载一个大的文件比加载两个小的文件快，因为会增加HTTP交互的次数并且大部分浏览器在任何时候对于同一个服务器，只保持两个连接。开发wro4j项目的目的是减少加载一个页面的请求次数和传输的数据量。<br />
该工具对于存在大量js和css资源文件的web应用，真是太有用了，快去在你的应用中使用该工具吧~<br />
wro4j官方网站：<a href="http://code.google.com/p/wro4j/">http://code.google.com/p/wro4j/</a><!--more-->，详细的使用方法可以参照官方说明，这里只是简单的介绍一下该工具。
<strong><span style="color: #0000ff;">特性：</span></strong>
<ol>
	<li>免费开源</li>
	<li> 容易设置</li>
	<li>轻量级，核心jar文件只依赖 servlet-api 和 commons-io</li>
	<li> 最小化和动态运行</li>
	<li>资源合并</li>
	<li> css url重定向</li>
	<li> Wildcard support for selecting a bunch of resources</li>
	<li> 基于Base64 的图片编码</li>
	<li> css变量支持</li>
	<li>更少的css</li>
	<li> 扩展性</li>
	<li> 缓存</li>
</ol>
<span style="color: #0000ff;"><strong>部署Wro4j：</strong></span>
<span style="color: #ff00ff;">1. 在web.xml配置wro4j Servlet 过滤器</span>
<span class="tag">&lt;filter&gt;</span><span class="pln">
</span><span class="tag">&lt;filter-name&gt;</span><span class="pln">WebResourceOptimizer</span><span class="tag">&lt;/filter-name&gt;</span><span class="pln">
</span><span class="tag">&lt;filter-class&gt;</span><span class="pln">
ro.isdc.wro.http.WroFilter
</span><span class="tag">&lt;/filter-class&gt;</span><span class="pln">
</span><span class="tag">&lt;/filter&gt;</span><span class="pln">
</span><span class="tag">&lt;filter-mapping&gt;</span><span class="pln">
</span><span class="tag">&lt;filter-name&gt;</span><span class="pln">WebResourceOptimizer</span><span class="tag">&lt;/filter-name&gt;</span><span class="pln">
</span><span class="tag">&lt;url-pattern&gt;</span><span class="pln">/wro/*</span><span class="tag">&lt;/url-pattern&gt;</span><span class="pln">
</span><span class="tag">&lt;/filter-mapping&gt;</span>
<span class="tag">&lt;filter&gt;</span><span class="pln">
</span><span class="tag">&lt;filter-name&gt;</span><span class="pln">WebResourceOptimizer</span><span class="tag">&lt;/filter-name&gt;</span><span class="pln">
</span><span class="tag">&lt;filter-class&gt;</span><span class="pln">
ro.isdc.wro.http.WroFilter
</span><span class="tag">&lt;/filter-class&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">configuration</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">DEVELOPMENT</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">gzipResources</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">FALSE</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">cacheUpdatePeriod</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">60</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">modelUpdatePeriod</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">600</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">jmxEnabled</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">false</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">mbeanName</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">MyApplication</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;param-name&gt;</span><span class="pln">header</span><span class="tag">&lt;/param-name&gt;</span><span class="pln">
</span><span class="tag">&lt;param-value&gt;</span><span class="pln">Expires: Thu, 15 Apr 2020 20:00:00 GMT | Last-Modified: Thu, 15 Apr 2010 20:00:00 GMT</span><span class="tag">&lt;/param-value&gt;</span><span class="pln">
</span><span class="tag">&lt;/init-param&gt;</span><span class="pln">
</span><span class="tag">&lt;/filter&gt;</span>
<span style="color: #ff00ff;">2.在WEB-INF目录下，创建一个wro.xml的配置文件，并加入资源文件</span>
<span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;groups</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.isdc.ro/wro"</span><span class="pln">
</span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
</span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.isdc.ro/wro wro.xsd"</span><span class="tag">&gt;</span></p>

<p><span class="tag">&lt;group</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"g1"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;js&gt;</span><span class="pln">classpath:com/javachen/1.js</span><span class="tag">&lt;/js&gt;</span><span class="pln">
</span><span class="tag">&lt;css&gt;</span><span class="pln">classpath:comjavachen/1.css</span><span class="tag">&lt;/css&gt;</span><span class="pln">
</span><span class="tag">&lt;group-ref&gt;</span><span class="pln">g2</span><span class="tag">&lt;/group-ref&gt;</span><span class="pln">
</span><span class="tag">&lt;/group&gt;</span></p>

<p><span class="tag">&lt;group</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"g2"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;js&gt;</span><span class="pln">/dwr/engine.js</span><span class="tag">&lt;/js&gt;</span><span class="pln">
</span><span class="tag">&lt;group-ref&gt;</span><span class="pln">g3</span><span class="tag">&lt;/group-ref&gt;</span><span class="pln">
</span><span class="tag">&lt;css&gt;</span><span class="pln">classpath:/static/css/2.css</span><span class="tag">&lt;/css&gt;</span><span class="pln">
</span><span class="tag">&lt;js&gt;</span><span class="pln">classpath:/static/*.js</span><span class="tag">&lt;/js&gt;</span><span class="pln">
</span><span class="tag">&lt;/group&gt;</span><span class="pln">
</span><span class="tag">&lt;/groups&gt;</span>
<span style="color: #ff00ff;">3.在页面引入相应的js和css文件</span>
<span class="tag">&lt;html&gt;</span><span class="pln">
</span><span class="tag">&lt;head&gt;</span><span class="pln">
</span><span class="tag">&lt;title&gt;</span><span class="pln">Web Frameworks Comparison</span><span class="tag">&lt;/title&gt;</span><span class="pln">
</span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/css"</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"/wro/g2.css"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"/wro/g2.js"</span><span class="tag">&gt;&lt;/script&gt;</span><span class="pln">
</span><span class="tag">&lt;/head&gt;</span><span class="pln">
</span><span class="tag">&lt;body&gt;</span><span class="pln">
</span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></p>
