---
layout: post
title: JSF Managed Beans
categories:
- JSF
tags:
- Bean
- JSF
published: true
comments: true
---
<p>JSF 使用 Bean 来达到逻辑层与表现层分离的目的，Bean 的管理集中在组态档案中，您只要修改组态档案，就可以修改 Bean 之间的相依关系。JSF支持配置文件配置bean和注解标注bean两种方式，声明一个受托管的javabean。JSF通过javabean来达到视图与逻辑相分离的目的，每一个javabean不需要继承任何java类，是一个纯粹的pojo对象，这点比struts做的好多了（当然struts2 有所改进）。</p>

<p>JSF将Bean的管理集中在faces-config.xml中，一个例子如下：
<pre escaped="true" lang="xml">....
 &lt;managed-bean&gt;
    &lt;managed-bean-name&gt;user&lt;/managed-bean-name&gt;
        &lt;managed-bean-class&gt;
            onlyfun.caterpillar.UserBean
        &lt;/managed-bean-class&gt;
    &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;
 &lt;/managed-bean&gt;
 ....
</pre>
&lt;managed-bean-scope&gt;设定Bean的生命存活范围，您可以设为<span style="color: #0000ff;">request、session 和application</span>（这和JSP有点差别），设为request時，Bean的存活为请求阶段，设为session则在使用应用程序交互开始，直到关闭浏览器或显示的结束会话为止，设为application，則Bean会一直存活到应用关闭为止。</p>

<p><span style="color: #ff00ff;"><em>还可以將存活存活范围设为none，当设为none时会在需要的时候生成一新的Bean</em></span>，例如您在一個method中想要生成一个临时的Bean，就可以将他设定为none。</p>

<p>在bean的声明中可以为其指定属性，JSF在初始化该bean的时候会为其set注入这些属性。除了注入基本属性之外，还可以注入list、map集合属性。
<pre escaped="true" lang="xml">....
 &lt;managed-bean&gt;
    &lt;managed-bean-name&gt;someBean&lt;/managed-bean-name&gt;
    &lt;managed-bean-class&gt;
       onlyfun.caterpillar.SomeBean
    &lt;/managed-bean-class&gt;
    &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;</pre></p>

<p>    &lt;managed-property&gt;<br />
        &lt;property-name&gt;someProperty&lt;/property-name&gt;<br />
        &lt;list-entries&gt;<br />
            &lt;value-class&gt;java.lang.Integer&lt;/value-class&gt;<br />
            &lt;value&gt;1&lt;/value&gt;<br />
            &lt;value&gt;2&lt;/value&gt;<br />
            &lt;value&gt;3&lt;/value&gt;<br />
        &lt;/list-entries&gt;<br />
    &lt;/managed-property&gt;<br />
 &lt;/managed-bean&gt;<br />
 ....

<pre escaped="true" lang="xml">....
   &lt;managed-bean&gt;
    &lt;description&gt;
      Special expense item types
    &lt;/description&gt;
    &lt;managed-bean-name&gt;specialTypes&lt;/managed-bean-name&gt;
    &lt;managed-bean-class&gt;
        java.util.TreeMap
    &lt;/managed-bean-class&gt;
    &lt;managed-bean-scope&gt;application&lt;/managed-bean-scope&gt;
    &lt;map-entries&gt;
      &lt;value-class&gt;java.lang.Integer&lt;/value-class&gt;
      &lt;map-entry&gt;
        &lt;key&gt;Presentation Material&lt;/key&gt;
        &lt;value&gt;100&lt;/value&gt;
      &lt;/map-entry&gt;
      &lt;map-entry&gt;
        &lt;key&gt;Software&lt;/key&gt;
        &lt;value&gt;101&lt;/value&gt;
      &lt;/map-entry&gt;
      &lt;map-entry&gt;
        &lt;key&gt;Balloons&lt;/key&gt;
        &lt;value&gt;102&lt;/value&gt;
      &lt;/map-entry&gt;
    &lt;/map-entries&gt;
  &lt;/managed-bean&gt;
 ....</pre></p>
