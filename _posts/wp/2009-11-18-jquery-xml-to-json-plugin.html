---
layout: post
title: jQuery XML to JSON Plugin
categories:
- jQuery
tags:
- jQuery
published: true
comments: true
---
<p>jQuery XML to JSON Plugin插件是通过用js代码实现将xml文件转换为json格式的数据，方便读取，特别是用ajax读取xml后，对返回的接送格式进行操作非常方便。</p>

<p>例如：
<pre><code>&lt;xml&gt; 
&lt;site&gt;javachen.com&lt;/site&gt; 
&lt;/xml&gt;
通过</code>jQuery XML to JSON Plugin可以将上面的xml转换为一下json格式：</pre>
<pre><code>{ 
   site: 'javachen.com'; 
}</code></pre>
<strong><span style="color: #0000ff;">插件使用方法：</span></strong>
<pre><code>var xml = '&lt;xml&gt;&lt;site&gt;javachen.com&lt;/site&gt;&lt;/xml&gt;'; 
var json = $.xml2json(xml); 
alert(json.site);</code>$.get('data/hello.xml', function(xml){</pre>
<pre><code>var json = $.xml2json(xml); 
alert(json.site); 
});</code></pre>
<strong><span style="color: #0000ff;">插件下载地址：</span></strong>
<a href="http://www.fyneworks.com/jquery/xml-to-json/#tab-Download" target="_blank">jQuery XML to JSON Plugin</a></p>

<p><strong><span style="color: #0000ff;">插件作者：</span></strong></p>

<p><a href="http://www.fyneworks.com">http://www.fyneworks.com</a><!--more--></p>

<p>使用该插件最主要的是$.xml2json方法，该方法有两个参数：（xmlfile，boolean），第二个参数可有可无，但有和无时候的含义不同用法也不同。
<code>
<strong><span style="color: #0000ff;">无第二个参数时候，例子如下：</span></strong>
下面xml文件地址为：</code>(<a href="http://www.fyneworks.com/jquery/xml-to-json/data/animals.xml" target="_blank">data/animals.xml</a>)
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt; 
&lt;animals&gt; 
&lt;dog color='Black'&gt; 
&lt;name&gt;Rufus&lt;/name&gt; 
&lt;breed&gt;labrador&lt;/breed&gt; 
&lt;/dog&gt; 
&lt;dog breed='whippet'&gt; 
Adopted 
&lt;name&gt;Marty&lt;/name&gt; 
&lt;/dog&gt; 
&lt;cat color="White"&gt; 
&lt;name&gt;Matilda&lt;/name&gt; 
&lt;/cat&gt; 
&lt;/animals&gt;</code></pre>
<span style="color: #0000ff;">读取xml文件方法：</span>
<pre><code>$.get('data/animals.xml', function(xml){ 
var animals = $.xml2json(xml); 
alert(animals.dog[1].name +'/'+ animals.dog[1]); 
});</code></pre>
In simple mode, the plugin will only use arrays and objects when necessary. It also means you don't have to use .text (or .nodeValue) to retrieve the text of each node.
<h3>Resulting JSON object：</h3>
<pre><code>{ 
dog:[ 
{ name:'Rufus', breed:'labrador', color:'Black' }, 
{ text:'Adopted', name:'Marty', breed:'whippet' } 
], 
cat:{ name:'Matilda', color:'White'} 
}
</code>
<h3>Accessing the data</h3>
</pre>
<pre><code>animals.dog === '{Array}'; 
animals.dog[0] === '{Object}'; // No text in node 
animals.dog[0].name === 'Rufus'; 
animals.dog[0].color === 'Black';// from attribute 
animals.dog[0].breed === 'labrador'; 
animals.dog[1] === 'Adopted'; // text in node (animals.dog[1].text) 
animals.dog[1].name === 'Marty'; 
animals.dog[1].breed === 'whippet'; 
animals.cat === '{Object}'; // only 1 cat, array not required 
animals.cat.name === 'Matilda'; 
animals.cat.color === 'White';</code></pre>
在这种情况下，该插件将xml按照父子节点，将其解析问包含数组和对象的json对象，数组里又包含有对象！</p>

<p><span style="color: #0000ff;"><strong>有第二个参数的情况：</strong></span>
<pre><code>$.get('data/animals.xml', function(xml){ 
var animals = $.xml2json(xml, true); 
alert(animals.dog[1].name[0].text +'/'+ animals.dog[1].text); 
});</code></pre>
In extended mode, the plugin converts each and <strong>every node into an array</strong>.<br />
在这种情况下，该插件将每一个几点转换为个数组！<br />
如下：
<h3>Resulting JSON object</h3>
<pre><code>{ 
dog:[ 
{ name:['Rufus'], breed:['labrador'], color:'Black' }, 
{ text:'Adopted', name:['Marty'], breed:'whippet' } 
], 
cat:[ 
{ name:'Matilda', color:'White'} 
] 
}</code></pre>
<h3>Accessing the data：</h3>
<pre><code>animals.dog === '{Array}'; 
animals.dog[0] === '{Object}'; // No text in node 
animals.dog[0].name[0].text === 'Rufus'; 
animals.dog[0].color[0].text === 'Black';// from attribute 
animals.dog[0].breed[0].text === 'labrador'; 
animals.dog[1] === '{Object}'; // node text stored in '.text' 
animals.dog[1].text === 'Adopted'; // not available in animals.dog[1] 
animals.dog[1].name[0].text === 'Marty'; 
animals.dog[1].breed[0].text === 'whippet'; 
animals.cat === '{Array}'; 
animals.cat[0] === '{Object}'; 
animals.cat[0].name[0].text === 'Matilda'; 
animals.cat[0].color[0].text === 'White';</code></pre></p>
