<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://blog.javachen.com/atom.xml" />
    	<link REL="SHORTCUT ICON" HREF="http://blog.javachen.com/favicon.ico"/>
		<meta name="keywords" content="html,xhtml,css,js,javascript,ajax,jQuery,java,struts,struts2,hibernate,spring,jpa,maven,ant,git,github,jekyll,markdown,wiki,
    java,jboss,JDG,EDS,bi,pentaho,kettle,nosql,cassandra,hadoop,bigdata,cloud,opensource,openstack" />
		<meta name="description" content="javachen" />

		<meta property="wb:webmaster" content="61eb31a6e636506d" />
    	<meta name="ujianVerification" content="f8b60286538bf86567069598d8a5d6cc" />
    	<meta name="wumiiVerification" content="eec4ca3c-ccdb-4c0f-9fe3-4499d87649a3" />
		<title>通过Cloudera Manager安装CDH</title>
		
		<link rel="stylesheet" href="/css/main.css" />
		<link rel="stylesheet" href="/css/pygments_native.css" />
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Handlee">
	</head>
	<body>
		<header id="header">
			<div class="header-info fix">
				<h1><a href="/">JavaChen Blog</a></h1>
				<p class="describe">&lt; Dive into Java ... /&gt;</p>
				<nav class="navigation">
					<ul>
						<li><a href="/">Home</a></li>
						<li><a href="/archive.html">Archive</a></li>
						<!--<li><a href="/sitemap.txt">网站地图</a></li>-->
						<li><a href="/about.html">About</a></li>
						<li><a href="/atom.xml">RSS</a></li>
					</ul>
				</nav>
			</div>
		</header><!--/header end-->

		<section id="content" class="fix">
			<article id="post">
	<a href="#" class="icon-fullscreen r" title="点击全屏显示"></a>
	<div class="c9">
		Categories：
			
			<a href="/category.html#hadoop">hadoop</a>
			
			
		&emsp;&emsp;&emsp;&emsp;
		Tages：Hadoop
		&emsp;&emsp;&emsp;&emsp;
		Time：<time date="2013-06-24 21:00:00 +0800">2013-06-24 21:06</time>
		&emsp;&emsp;&emsp;&emsp;
		<a href='#comment' title='分享文章、查看评论' style="float:right;margin-right:.5em;">Comments</a>
	</div>

	<h1>通过Cloudera Manager安装CDH</h1>

	<p>你可以从<a href="https://ccp.cloudera.com/display/SUPPORT/Downloads">https://ccp.cloudera.com/display/SUPPORT/Downloads</a>下载cloudera-manager-installer.bin，然后修改执行权限并执行该脚本。
该脚本中配置的rhel6的yum源为：<a href="http://archive.cloudera.com/cm4/redhat/6/x86_64/cm/4/">http://archive.cloudera.com/cm4/redhat/6/x86_64/cm/4/</a>，下载的过程必须连网并且rpm的过程会非常慢，这种方法对虚拟机或者是无法连网的内网机器来说根本无法使用。</p>

<p>因为知道所有的rpm都在上面网址可以下载到，故你可以手动下载这些rpm然后手动安装，详细过程请参考：<a href="http://dreamyue.com/post/41090075449/cloudera-manager-hadoop">通过cloudera-manager来安装hadoop</a>。</p>

<p>这里还有一种方法，就是手动下载<code>Cloudera Manager</code>的yum tar包，在虚拟机中搭建一个本地yum源，然后修改hosts文件，使<code>archive.cloudera.com</code>域名映射到本地ip。</p>

<p>出于好奇，想破解<code>cloudera-manager-installer.bin</code>，然后看看其中做了哪些操作。通过以下脚本即可解压该文件：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">[june@june-fedora cdh]$ mv cloudera-manager-installer.bin cloudera-manager-installer.zip
[june@june-fedora cdh]$ unzip cloudera-manager-installer.zip 
</code></pre></div>
<p>解压之后的目录如下：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">[june@june-fedora cloudera-manager-installer]$ ll
总用量 512
-rwxrwxr-x. 1 june june 501698 5月  25 09:53 cloudera-manager-installer.zip
drwxr-xr-x. 2 june june   4096 5月  23 03:05 data
drwxr-xr-x. 2 june june   4096 5月  22 21:48 guis
drwxr-xr-x. 2 june june   4096 5月  22 21:48 meta
drwxr-xr-x. 2 june june   4096 5月  22 21:48 scripts
</code></pre></div>
<p>查看解压之后的文件可以看到安装脚本是用lua编写并用MojoSetup编译的，从scripts/config.lua脚本中大概可以看出安装脚本的执行过程。</p>

<p>整理下该脚本逻辑，主要是做了以下操作：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">yum install -y jdk.x86_64 
yum install -y cloudera-manager-server 
yum install -y cloudera-manager-server-db
/etc/init.d/cloudera-scm-server start
/etc/init.d/cloudera-scm-server-db start
</code></pre></div>
<p>知道了上面这点之后，就可以在本地的cloudera-manager yum中，执行以上操作完成cloudera-manager的安装，安装成功之后即可以访问web界面。</p>


	<div class="eof">-<strong>原创文章，转载请注明：</strong>转载自：<a href='/hadoop/2013/06/24/install-cdh-by-cloudera-manager.html'>JavaChen Blog</a>-
		<br/>
		<br/>
		<!-- JiaThis Button BEGIN -->
		<div class="jiathis_style_32x32">
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_tqq"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_twitter"></a>
		<a class="jiathis_button_fb"></a>
		<a class="jiathis_button_googleplus"></a>
		<a class="jiathis_button_translate"></a>
		<a class="jiathis_button_delicious"></a>
		<a class="jiathis_button_sdonote"></a>
		<a class="jiathis_button_ydnote"></a>
		<a class="jiathis_button_qingbiji"></a>
		<a class="jiathis_button_fav"></a>
		<a class="jiathis_button_ishare"></a>
		<a class="jiathis_button_copy"></a>
		<a class="jiathis_button_email"></a>
		<a class="jiathis_button_print"></a>
		<a class="jiathis_button_printfriendly"></a>
		<a class="jiathis_button_pdfonline"></a>
		<a href="http://www.jiathis.com/share?uid=1709061" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
		<a class="jiathis_counter_style"></a>
		</div>
		<script type="text/javascript" >
		var jiathis_config={
			data_track_clickback:true,
			summary:"",
			hideMore:false
		}
		</script>
		<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1709061" charset="utf-8"></script>
		<!-- JiaThis Button END -->



		<!-- UJian Button BEGIN -->
		<div class="ujian-hook"></div>
		<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?uid=1709061"></script>
		<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
		<!-- UJian Button END -->
	</div>
	
	<hr/>
	<div class="page fix">
		
		<span class="prev"><a href="/hadoop/2013/04/17/access-idh-2.3-hbase-in-kettle.html">← kettle访问IDH2.3中的HBase</a></span>
		
		
	</div>
	<hr/>
</article>

<div id="comment">
	<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"javachen"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
</div>

<script src="/js/jquery-min.js"></script>
<script src="/js/Fullscreen.js"></script>
<script type="text/javascript">
$(function() {
	// =============== 全屏显示 ==================
	(function() {
		var icon = $( 'a.icon-fullscreen' ),
			fs, fsCallback;
		
		fsCallback = function(isFullscreen) {
				if (isFullscreen) {
					icon.addClass('expand').attr('title', 'ESC 退出全屏');
				}
				else {
					icon.removeClass('expand').attr('title', '点击全屏显示');
				}
			};
			
		fs = new Fullscreen({
				element: $('#post'),
				noSafari: true,
				callback: fsCallback
			});

		if (fs.fullscreenEnabled) {
			icon.on('click', function() {
				fs.toggleFullscreen();
				return false;
			});
		}
		else {
			icon.hide();
		}
	})();


	// ============== 目录提取 ===============
	(function() {
		// 设置无目录时，不显示
		if (!parseInt('', 10)) {
			return;
		}

		var dom = $('<fieldset id="catalogue"><legend>目录</legend></fieldset>'),
			count = 0;
		
		$('#post').find('h2,h3,h4,h5').each(function() {
			var name = 'catalogue_' + count++;
			dom.append('<div class="txt_' + this.tagName + '">' +
				'<a href="#' + name + '">' +
					this.innerHTML +
				'</a></div>');
			this.id = name;
		});

		dom.appendTo('body');
	})();
});
</script>
<!-- UJian Button BEGIN -->
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide&btn=4&fade=1&uid=1709061"></script>
<!-- UJian Button END -->


		</section><!--/content end-->

		<footer id="footer">
			<p class="l">
				&copy; 2013 <a href="http://blog.javachen.com">JavaChen</a>. | Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://pages.github.com/">GitHub Pages</a>
			</p>
			<!--Templates from <a href='https://github.com/calefy/calefy.github.com' target='_blank'>calefy</a>.-->
			<p class="r">
				<script language="javascript" type="text/javascript" src="http://js.users.51.la/12111481.js"></script>
<noscript><a href="http://www.51.la/?12111481" target="_blank"><img alt="Statistic" src="http://img.users.51.la/12111481.asp" style="border:none" /></a></noscript>
			</p>
			<p class="tac">
				<small>『纸上得来终觉浅，绝知此事要躬行』</small>
			</p>
		</footer><!--/footer end-->



	</body>
</html>
