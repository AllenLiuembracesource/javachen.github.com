
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>JavaChen Blog</title>
    <meta name="description" content="开源、Java、Pentaho、Hadoop、Cassandra以及数据可视化"/>
    <meta name="keywords" content="pentaho、kettle、hadoop、hdfs、hive、hbase、mapreduce、cassandra、openstack、OpenNebula、Eucalyptus、fedora、linux、vim、extjs、dhtmlx、spring、javascript"/>
    <meta name="author" content="JavaChen"/>
    <meta name="copyright" content="© http://blog.javachen.com" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="baidu-site-verification" content="ECLZpXwkOR" />

    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css " rel="stylesheet" />
    <link href="/assets/themes/javachen/css/style.css?body=1" rel="stylesheet" type="text/css" media="all" />
    <link href="/assets/themes/javachen/css/pygments.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/assets/themes/javachen/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" media="all" />

    <!-- fav and touch icons -->
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="http://blog.javachen.com/page2/" />
    <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.png" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="JavaChen Blog ATOM Feed" />
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="JavaChen Blog RSS Feed" />
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/" title="JavaChen Blog">JavaChen Blog</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav">
          
          
          


  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  




        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://blog.javachen.com/rss.xml" target="_blank" title="RSS"><span class="icon-rss icon-large"></span></a></li>
          
            <li><a href="https://github.com/javachen" target="_blank" title="Github"><span class="icon-github icon-large"></span></a></li>
          
          
          
          
          
            <li><a href="http://weibo.com/chenzhijun" target="_blank" title="Weibo"><span class="icon-weibo icon-large"></span></a></li>
          
        </ul>
      </div><!-- /.navbar-collapse -->
      </div>
    </nav>

    <div class="container">
      <div class="content">
        
<div class="row">

  <div class="col-md-9">
    <article class="page-header-wrapper">
      <header class="page-header">
        <h2>  <small>Life is short,we need passion.</small></h2>
      </header>
	


<article>
    <header>
    	<h1 class="entry-title headline"><a href="/hbase/2014/01/16/hbase-region-split-policy">HBase Region Split策略</a></h1>
    </header>
    
      <h1>Region 概念</h1>

<p>Region是表获取和分布的基本元素，由每个列族的一个Store组成。对象层级图如下：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">Table       (HBase table)
    Region       (Regions for the table)
         Store          (Store per ColumnFamily for each Region for the table)
              MemStore        (MemStore for each Store for each Region for the table)
              StoreFile       (StoreFiles for each Store for each Region for the table)
                    Block     (Blocks within a StoreFile within a Store for each Region for the table)
</code></pre></div>
<h1>Region 大小</h1>

<p>Region的大小是一个棘手的问题，需要考量如下几个因素。</p>

<ul>
<li>Regions是可用性和分布式的最基本单位</li>
<li>HBase通过将region切分在许多机器上实现分布式。也就是说，你如果有16GB的数据，只分了2个region， 你却有20台机器，有18台就浪费了。</li>
<li>region数目太多就会造成性能下降，现在比以前好多了。但是对于同样大小的数据，700个region比3000个要好。</li>
<li>region数目太少就会妨碍可扩展性，降低并行能力。有的时候导致压力不够分散。这就是为什么，你向一个10节点的HBase集群导入200MB的数据，大部分的节点是idle的。</li>
<li>RegionServer中1个region和10个region索引需要的内存量没有太多的差别。</li>
</ul>


     

      <div class="status">
        
        <a class="btn btn-default btn-sm pull-left" href="/hbase/2014/01/16/hbase-region-split-policy"><span class="readmore">more &raquo; </span></a>
        
        <div class="clearfix"></div>
      </div>
</article>
<hr/>

<article>
    <header>
    	<h1 class="entry-title headline"><a href="/linux/2014/01/14/vim-config-and-plugins">vim配置和插件管理</a></h1>
    </header>
    
      <p>这篇文章主要是记录vim配置中各个配置项的含义并且收藏一些常用的插件及其使用方法。</p>

<h1>1. vim配置</h1>

<p>目前我的vimrc配置放置在:<a href="https://github.com/javachen/snippets/blob/master/dotfiles/.vimrc">https://github.com/javachen/snippets/blob/master/dotfiles/.vimrc</a>，其中大多数用英文注释。</p>

<h1>2. 插件管理</h1>

<h2>pathogen</h2>

<p>项目地址:   <a href="https://github.com/tpope/vim-pathogen">https://github.com/tpope/vim-pathogen</a></p>

<p>首选需要安装神器 pathogen 来管理所有的插件，具体安装可以看官网的介绍。</p>

<p>要记得把以下内容加入到vimrc文件中:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">execute pathogen#infect()
</code></pre></div>

     

      <div class="status">
        
        <a class="btn btn-default btn-sm pull-left" href="/linux/2014/01/14/vim-config-and-plugins"><span class="readmore">more &raquo; </span></a>
        
        <div class="clearfix"></div>
      </div>
</article>
<hr/>

<article>
    <header>
    	<h1 class="entry-title headline"><a href="/java/2014/01/13/about-sitemesh">SiteMesh介绍</a></h1>
    </header>
    
      <h1>1. SiteMesh简介</h1>

<p>SiteMesh是由一个基于Web页面布局、装饰以及与现存Web应用整合的框架。它能帮助我们在由大量页面构成的项目中创建一致的页面布局和外观，如一致的导航条，一致的banner，一致的版权等等。它不仅仅能处理动态的内容，如jsp，php，asp等产生的内容，它也能处理静态的内容，如htm的内容，使得它的内容也符合你的页面结构的要求。甚至于它能将HTML文件象include那样将该文件作为一个面板的形式嵌入到别的文件中去。所有的这些，都是GOF的Decorator模式的最生动的实现。尽管它是由java语言来实现的，但它能与其他Web应用很好地集成。</p>

<h1>2. SiteMesh原理</h1>

<p>SiteMesh框架是OpenSymphony团队开发的一个非常优秀的页面装饰器框架，它通过对用户请求进行过滤，并对服务器向客户端响应也进行过滤，然后给原始页面加入一定的装饰(header,footer等)，然后把结果返回给客户端。通过SiteMesh的页面装饰，可以提供更好的代码复用，所有的页面装饰效果耦合在目标页面中，无需再使用include指令来包含装饰效果，目标页与装饰页完全分离，如果所有页面使用相同的装饰器，可以是整个Web应用具有统一的风格。</p>

<h1>3. SiteMesh3</h1>

<p>SiteMesh3只有Alpha2版本而且很久没更新了，和SpringMVC配合，有些静态内容会出现NO Content的错误。 虽然它号称性能快3倍内存少1倍，但还是保险起见依然用SiteMesh2了。</p>

<p>另外，Atlassian公司因为在自己的产品中使用了SiteMesh2，所以后来也一直有维护，出到了2.5-atlassian-9版，不过不在maven中央库中，可以在<a href="https://maven-us.nuxeo.org/nexus/content/groups/public/opensymphony/sitemesh/2.5-atlassian-9/">这里</a>下载。</p>


     

      <div class="status">
        
        <a class="btn btn-default btn-sm pull-left" href="/java/2014/01/13/about-sitemesh"><span class="readmore">more &raquo; </span></a>
        
        <div class="clearfix"></div>
      </div>
</article>
<hr/>

<article>
    <header>
    	<h1 class="entry-title headline"><a href="/linux/2014/01/09/after-reinstall-the-system">重装linux-mint系统之后</a></h1>
    </header>
    
      <h1>安装常用工具</h1>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo apt-get install ctags curl git vim tmux meld htop putty subversion  nload  iptraf iftop  openssh-server gconf-editor gnome-tweak-tool
</code></pre></div>
<h1>安装ibus</h1>

<p>只需要安装gnome-language-selector ，不用安装im-switch，然后再允许im-config，设置之后注销登陆即可。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo apt-get install gnome-language-selector 
</code></pre></div>
<h1>安装gedit-markdown</h1>
<div class="highlight"><pre><code class="text language-text" data-lang="text">wget https://gitorious.org/projets-divers/gedit-markdown/archive/master.zip
cd master
./gedit-markdown.sh install
</code></pre></div>

     

      <div class="status">
        
        <a class="btn btn-default btn-sm pull-left" href="/linux/2014/01/09/after-reinstall-the-system"><span class="readmore">more &raquo; </span></a>
        
        <div class="clearfix"></div>
      </div>
</article>
<hr/>

<article>
    <header>
    	<h1 class="entry-title headline"><a href="/hive/2014/01/08/hive-ha-by-haproxy">Hive使用HAProxy配置HA</a></h1>
    </header>
    
      <p>HAProxy是一款提供高可用性、负载均衡以及基于TCP（第四层）和HTTP（第七层）应用的代理软件，HAProxy是完全免费的、借助HAProxy可以快速并且可靠的提供基于TCP和HTTP应用的代理解决方案。</p>

<ul>
<li>免费开源，稳定性也是非常好，这个可通过我做的一些小项目可以看出来，单Haproxy也跑得不错，稳定性可以与硬件级的F5相媲美。
根据官方文档，HAProxy可以跑满10Gbps-New benchmark of HAProxy at 10 Gbps using Myricom&#39;s 10GbE NICs （Myri-10G PCI-Express），这个数值作为软件级负载均衡器是相当惊人的。</li>
<li>HAProxy 支持连接拒绝 : 因为维护一个连接的打开的开销是很低的，有时我们很需要限制攻击蠕虫（attack bots），也就是说限制它们的连接打开从而限制它们的危害。 这个已经为一个陷于小型DDoS攻击的网站开发了而且已经拯救了很多站点，这个优点也是其它负载均衡器没有的。</li>
<li>HAProxy 支持全透明代理（已具备硬件防火墙的典型特点）: 可以用客户端IP地址或者任何其他地址来连接后端服务器. 这个特性仅在Linux 2.4/2.6内核打了cttproxy补丁后才可以使用. 这个特性也使得为某特殊服务器处理部分流量同时又不修改服务器的地址成为可能。</li>
<li>HAProxy现多于线上的Mysql集群环境，我们常用于它作为MySQL（读）负载均衡；</li>
<li>自带强大的监控服务器状态的页面，实际环境中我们结合Nagios进行邮件或短信报警，这个也是我非常喜欢它的原因之一；</li>
<li>HAProxy支持虚拟主机，许多朋友说它不支持虚拟主机是错误的，通过测试我们知道，HAProxy是支持虚拟主机的。</li>
</ul>

<p>HAProxy特别适用于那些负载特大的web站点， 这些站点通常又需要会话保持或七层处理。HAProxy运行在当前的硬件上，完全可以支持数以万计的并发连接。并且它的运行模式使得它可以很简单安全的整合进您当前的架构中， 同时可以保护你的web服务器不被暴露到网络上。</p>


     

      <div class="status">
        
        <a class="btn btn-default btn-sm pull-left" href="/hive/2014/01/08/hive-ha-by-haproxy"><span class="readmore">more &raquo; </span></a>
        
        <div class="clearfix"></div>
      </div>
</article>
<hr/>


<!-- Pagination links -->
<div class="pull-right">
  
    
    <a class="btn btn-default btn-sm" href="/">Home</a>
    <a class="btn btn-default btn-sm" href="/">&laquo; Prev</a>
    
  
  <span><a class="btn btn-default btn-sm disabled">Page: 2 of 14</a></span>
  
    <a class="btn btn-default btn-sm" href="/page3/">Next &raquo;</a>
    <a class="btn btn-default btn-sm" href="/page14/">Last</a>
  
</div>

    </article>
  </div>

  <div class="col-md-3 visible-lg visible-md">
                <section>
   	 <h2><i class="icon-home icon-large"></i>About</h2>
	 <p class="entry-content">
   	 一个Java方案架构师，主要从事hadoop相关工作。<a href="/about.html">更多信息</a> 
	</p>
       </section>


            <section>
       <h2><i class="icon-home icon-large"></i>Posts</h2>
       <div class="category">
         <ul>
           
           <li><a href="/linux/2014/01/25/how-to-install-ganglia-on-centos6">在centos6系统上安装Ganglia</a></li>
           
           <li><a href="/linux/2014/01/24/how-to-install-nagios-on-rhel6">在rhel系统上安装Nagios</a></li>
           
           <li><a href="/post/2014/01/22/all-things-opentsdb">All Things OpenTSDB</a></li>
           
           <li><a href="/post/2014/01/21/all-things-about-jekyll">All Things Jekyll</a></li>
           
           <li><a href="/linux/2014/01/18/bash-problem-when-ssh-access">ssh连接环境变量问题</a></li>
           
           <li><a href="/hbase/2014/01/16/hbase-region-split-policy">HBase Region Split策略</a></li>
           
           <li><a href="/linux/2014/01/14/vim-config-and-plugins">vim配置和插件管理</a></li>
           
           <li><a href="/java/2014/01/13/about-sitemesh">SiteMesh介绍</a></li>
           
           <li><a href="/linux/2014/01/09/after-reinstall-the-system">重装linux-mint系统之后</a></li>
           
           <li><a href="/hive/2014/01/08/hive-ha-by-haproxy">Hive使用HAProxy配置HA</a></li>
           
           <li><a href="/linux/2013/12/27/some-git-configs-and-cammands">git配置和一些常用命令</a></li>
           
           <li><a href="/saltstack/2013/11/18/study-note-of-saltstack">SaltStack学习笔记[未完成]</a></li>
           
           <li><a href="/saltstack/2013/11/16/install-jboss-with-saltstack">使用saltstack安装jboss</a></li>
           
           <li><a href="/saltstack/2013/11/11/install-saltstack-and-halite">安装saltstack和halite</a></li>
           
           <li><a href="/hbase/2013/11/01/debug-hbase-in-eclipse">在eclipse中调试运行hbase</a></li>
           
           <li><a href="/hbase/2013/10/28/compile-hbase-source-code-and-apply-patches">编译hbase源代码并打补丁</a></li>
           
         </ul>
       </div>
      </section>


            <section>
        <h2><i class="icon-home icon-large"></i>Comments</h2>
        <div class="category">
          <ul class="ds-recent-comments" data-num-items="5" data-show-avatars="0" data-show-time="0" data-show-title="0" data-show-admin="0" data-excerpt-length="14"></ul>
        </div>
      </section>


            
      <section>
        <h2><i class="icon-home icon-large"></i>Blogroll</h2>
        <div class="category">
          <ul>
            
              <li><a href="//blog.boluotou.com/" target="_blank">圆木菠萝罐</a></li>
            
              <li><a href="//log4d.com/" target="_blank">Log4D</a></li>
            
              <li><a href="//blog.frankel.ch" target="_blank">A Java geek</a></li>
            
              <li><a href="//kohsuke.org/" target="_blank">Kohsuke Kawaguchi</a></li>
            
              <li><a href="http://www.parallellabs.com/" target="_blank">并行实验室</a></li>
            
              <li><a href="http://www.yanjiuyanjiu.com/" target="_blank">研究研究</a></li>
            
          </ul>
        </div>
      </section>
      


            <section>
        <h2><i class="icon-home icon-large"></i>License</h2>
        <ul>
          <li>
            <a href="http://www.creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank"><img alt="License" src="http://blog.javachen.com/assets/images/CC.png" title="署名-非商业性使用-相同方式共享 3.0 中国大陆"></a>
          </li>
        </ul>
      </section>


       <script type="text/javascript">
      var duoshuoQuery = {short_name:"javachen"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
    </script>

  </div>

</div>


      </div>

      <footer class="text-left">
        <p>&copy; 2009-2014 <a href="/" target="_blank">JavaChen</a>. Help from <a href="http://jekyllrb.com/" target="_blank" title="Jekyll">Jekyll </a>| <script language="javascript" type="text/javascript" src="http://js.users.51.la/12111481.js"></script>
<noscript><a href="http://www.51.la/?12111481" target="_blank"><img alt="Statistic" src="http://img.users.51.la/12111481.asp" style="border:none" /></a></noscript>
</p>
      </footer>
            <div id="toTop"><a href="#">▲</a><a href="#footer">▼</a></div>

    </div> <!-- /container -->

    <script type="text/javascript" src="//libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/javachen/js/jquery.min.js"><\/script>')</script>
    <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/themes/javachen/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
    <script type="text/javascript" src="/assets/themes/javachen/js/main.js"></script>
        <!-- Baidu Button BEGIN -->
    <script type="text/javascript" id="bdshell_js"></script>
    <script>document.write(unescape('%3Cscript%20type%3D%22text/javascript%22%20id%3D%22bdshare_js%22%20data%3D%22type%3Dtools%26amp%3Buid%3D1539895%22%3E%3C/script%3E'));</script>
    <script type="text/javascript">
      var bds_config = {
        'review':'normal',
        'snsKey':{
        }
      };
      document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
    </script>
    <!-- Baidu Button END -->

    


  <script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?83708c1ec341327ce3307ac0dd35e4f0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>





  </body>
</html>

