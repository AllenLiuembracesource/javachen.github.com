<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://blog.javachen.com/atom.xml" />
    	<link REL="SHORTCUT ICON" HREF="http://blog.javachen.com/favicon.ico"/>
		<meta name="keywords" content="html,xhtml,css,js,javascript,ajax,jQuery,java,struts,struts2,hibernate,spring,jpa,maven,ant,git,github,jekyll,markdown,wiki,
    java,jboss,JDG,EDS,bi,pentaho,kettle,nosql,cassandra,hadoop,bigdata,cloud,opensource,openstack" />
		<meta name="description" content="javachen" />

		<meta property="wb:webmaster" content="61eb31a6e636506d" />
    	<meta name="ujianVerification" content="f8b60286538bf86567069598d8a5d6cc" />
    	<meta name="wumiiVerification" content="eec4ca3c-ccdb-4c0f-9fe3-4499d87649a3" />
		<title>Ext读取xml文件生成动态表格和表单</title>
		
		<link rel="stylesheet" href="/css/main.css" />
		<link rel="stylesheet" href="/css/pygments_native.css" />
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Handlee">
	</head>
	<body>
		<header id="header">
			<div class="header-info fix">
				<h1><a href="/">JavaChen Blog</a></h1>
				<p class="describe">&lt; Dive into Java ... /&gt;</p>
				<nav class="navigation">
					<ul>
						<li><a href="/">Home</a></li>
						<li><a href="/archive.html">Archive</a></li>
						<!--<li><a href="/sitemap.txt">网站地图</a></li>-->
						<li><a href="/about.html">About</a></li>
						<li><a href="/atom.xml">RSS</a></li>
					</ul>
				</nav>
			</div>
		</header><!--/header end-->

		<section id="content" class="fix">
			<article id="post">
	<a href="#" class="icon-fullscreen r" title="点击全屏显示"></a>
	<div class="c9">
		分类：
			
			<a href="/category.html#JavaScript">JavaScript</a>
			
			
		&emsp;&emsp;&emsp;&emsp;
		标签：JavaScript
		&emsp;&emsp;&emsp;&emsp;
		<time date="2009-10-22 00:00:00 +0800">2009-10-22</time>
		&emsp;&emsp;&emsp;&emsp;
		<a href='#comment' title='分享文章、查看评论' style="float:right;margin-right:.5em;">Comments</a>
	</div>

	<h1>Ext读取xml文件生成动态表格和表单</h1>

	<p>最近开发项目，需要动态读取xml文件，生成Ext界面，xml文件通过前台页面的按钮事件传进来，可以在网上查找【javascript 弹出子窗口】的相关文章</a>
获取弹出窗口url后的参数方法：<br />
<pre lang="javascript" line="1">
// 获取url后的参数值
function getQueryStringValue(name) {
	var url = window.location.search;
	if (url.indexOf('?') < 0) {
		return null
	}
	var index = url.indexOf(name + "=");
	if (index < 0) {
		return null
	}
	var args = url.indexOf('&', index);
	var value;
	if (args > 0) {
		value = url.substring(index + name.length + 1, args);
	} else {
		value = url.substring(index + name.length + 1, url.length);
	}
	return value;
}
// 获取xml的服务器路径
function getXmlUrl(xmlFile) {
	return '../bjsasc_dictionary/' + getQueryStringValue('xmlFile');
}
</pre>
用到的一些辅助方法：
<pre lang="javascript" line="1">
// 去掉Dom节点中的空白字符
function cleanWhitespaces(elem) {
	var elem = elem || document;
	var childElem = elem.childNodes;
	var childElemArray = new Array;
	for (var i = 0; i < childElem.length; i++) {
		if (childElem[i].nodeType == 1) {
			childElemArray.push(childElem[i]);
		}
	}
	return childElemArray;
}
// 取得父窗口表单中键值对
function getParentFormValues() {
	var formObj = window.opener.document.forms["frmMain"].elements;
	var formValues = "";
	for (var i = 0; i < formObj.elements.length; i++) {
		if (formObj.elements[i].value != null
				&& formObj.elements[i].value != ""
				&& formObj.elements[i].value.length != 0) {
			formValues += '_' + formObj.elements[i].name.toUpperCase() + '{'
					+ formObj.elements[i].value.toUpperCase() + '}'
					+ formObj.elements[i].name.toUpperCase() + '_ ';
		}
	}
	formValues += opener.getBindValue(formObj.elements);
	return formValues;
}
// 取得过滤条件表单的键值对
function getCondictionValues() {
	var condictionString = "";
	var formObj = form.getForm().getEl().dom;
	for (var i = 0; i < formObj.elements.length; i++) {
		if (formObj.elements[i].value != null
				&& formObj.elements[i].value != ""
				&& formObj.elements[i].value.length != 0) {
			condictionString += '_' + formObj.elements[i].name + '{'
					+ formObj.elements[i].value + '}'
					+ formObj.elements[i].name + '_ ';
		}
	}
	// alert("condictionString"+condictionString);
	return condictionString;
}</pre></p>

<p>// 判读Ext表单是否有输入<br />
function isFormInputed(ExtForm) {<br />
	var flag = false;<br />
	var formObj = ExtForm.getEl().dom;<br />
	for (var i = 0; i < formObj.elements.length; i++) {<br />
		if (formObj.elements[i].value != null<br />
				&& formObj.elements[i].value != ""<br />
				&& formObj.elements[i].value.length != 0) {<br />
			flag = true;<br />
			break;<br />
		}<br />
	}<br />
	return flag;<br />
}</p>

<p>// 将计算得到的结果四舍五入<br />
/* * ForDight(Dight,How):数值格式化函数，Dight要 * 格式化的 数字，How要保留的小数位数。 */<br />
function ForDight(Dight, How) {<br />
	var Dight = Math.round(Dight * Math.pow(10, How)) / Math.pow(10, How);<br />
	return Dight;<br />
}

xml文件格式：
<pre lang="javascript" line="1">
< ?xml version="1.0" encoding="gb2312"?>
<dictionary>
	<title>领用出库-物资选择</title>
	<sql>
	select V_stores_list.* 
	from V_stores_list where WHID='+$getform(WHID)+' AND PROJECTNO='+$getform(PROJECTNO)+' AND CANUSEQTY>0 AND ??? and isblock=0
	</sql>
	<fromtable>V_stores_list</fromtable>
	<targettable>BO_IC_EXPORT_S</targettable>
	<line>20</line>
	<!-- 条件区开始-->
	<condition>
		<fieldname>MTRNAME</fieldname>
		<fieldtitle>物资名称</fieldtitle>
		<fieldtype>文本</fieldtype>
		<comparetype>< ![CDATA[like
		MTRNAME
						
		单行
		< ![CDATA[]]>		
	
	
	
	KEEPENDDATE
	日期     
	有效期截止日期
	1
	true
	 true
	KEEPENDDATE
	</comparetype></condition></dictionary></pre></p>

<p>然后，弹出窗口页面Ext入口代码：</p>

<p>// 全局变量<br />
var result = {};<br />
var grid;<br />
var form;<br />
var viewport;<br />
var store;<br />
var sm = new Ext.grid.CheckboxSelectionModel();<br />
var autoStore;<br />
var tempItems1 = [];<br />
var tempItems2 = [];<br />
var tempItems3 = [];<br />
var flag = 1;<br />
// 程序入口<br />
Ext.onReady(function() {<br />
	Ext.QuickTips.init();// 初始化<br />
	Ext.form.Field.prototype.msgTarget = 'qtip';// 统一指定错误信息提示方式<br />
	Ext.util.CSS	.swapStyleSheet('theme', '../aws_js/extjs2/css/xtheme-gray.css');// 更换皮肤<br />
	Ext.BLANK_IMAGE_URL = '../aws_js/extjs2/images/default/s.gif';<br />
	Ext.Ajax.request({<br />
		url : getXmlUrl(getQueryStringValue('xmlFile')), // 访问数据字典<br />
		method : 'post',<br />
		success : function(res, opt) {<br />
			var xmlObj = res.responseXML;<br />
			initStoreData(xmlObj); // 访问成功后执行后续工作<br />
		}<br />
	})<br />
});<br />
function initStoreData(xmlObj) {<br />
	getInitData(xmlObj);<br />
	document.title = result.winTitle;</p>

<p>	var dataRecorder = Ext.data.Record.create(result.gridRecords);// 指定记录集格式<br />
	// 获取表格数据部分<br />
	store = new Ext.data.Store({<br />
		idProperty : 'ID',<br />
		proxy : new Ext.data.HttpProxy({<br />
			url : '../search.do?method=findAll',<br />
			failure : function() {<br />
				// Ext.Msg.alert("Notice", "网路问题");<br />
			},<br />
			success : function(response) {<br />
				// Ext.Msg.alert("Notice", response.responseText);<br />
			}<br />
		}),</p>

<p>		// baseParams : {<br />
		// parentFormValues : getParentFormValues(),// 请求发送的参数：父表单值和xml文件名<br />
		// xmlFile : getQueryStringValue('xmlFile')<br />
		// // cmd:'search'<br />
		// },<br />
		reader : new Ext.data.JsonReader({<br />
			totalProperty : 'totalCount',<br />
			root : 'data'<br />
		}, dataRecorder)<br />
	});<br />
	// 要分页，第一次加载数据必须传start和limit两参数<br />
	// store.load({<br />
	// params : {<br />
	// start : 0,<br />
	// limit : result.limit<br />
	// }<br />
	// });<br />
	initViewport();<br />
}
// 获得界面初始化的一些数据<br />
function getInitData(xmlObj) {<br />
	// result.formItems = {};<br />
	result.columnHeaders = [];<br />
	result.gridRecords = [];<br />
	result.dbFilterRecords = [];<br />
	result.winTitle = xmlObj.getElementsByTagName("title")[0].firstChild.nodeValue; // 窗口title名称<br />
	result.limit = xmlObj.getElementsByTagName("line")[0].firstChild.nodeValue;// 分页数据<br />
	result.fromTable = xmlObj.getElementsByTagName("fromTable")[0].firstChild.nodeValue;// 来自哪个表<br />
	// 获取过滤条件表单的界面数据<br />
	var conections = xmlObj.getElementsByTagName("condition");<br />
	var row = ForDight(conections.length / 3, 0);<br />
	for (var i = 0; i < conections.length; i++) {<br />
		var item = {};<br />
		var condition = cleanWhitespaces(conections[i]);<br />
		item.id = condition[0].firstChild.nodeValue;<br />
		item.fieldLabel = condition[1].firstChild.nodeValue;<br />
		item.name = condition[4].firstChild.nodeValue;<br />
		item.anchor = '95%';<br />
		if (condition[6].firstChild.nodeValue == '单行') {<br />
			item.xtype = 'textfield';<br />
		} else if (condition[6].firstChild.nodeValue == '日期') {<br />
			item.xtype = 'datefield';<br />
			item.format = 'Y-m-d';<br />
		} else if (condition[6].firstChild.nodeValue == '数值') {<br />
			item.xtype = 'numberfield';<br />
			item.minValue = 0;<br />
			item.minText = '请输入有效的数字';<br />
			item.decimalPrecision = 6;<br />
		} else if (condition[6].firstChild.nodeValue == '自动填充') {<br />
			var autoStore = new Ext.data.SimpleStore({<br />
				proxy : new Ext.data.HttpProxy({// 读取远程数据的代理<br />
					url : '../ajax/autoComplete.do?method=autoComplete',<br />
					failure : function() {<br />
						Ext.Msg.alert("Notice", "no records");<br />
					}<br />
				}),<br />
				fields : ['property'],<br />
				baseParams : {<br />
					'sqlString' : condition[4].firstChild.nodeValue + ' | '<br />
							+ result.fromTable<br />
				}<br />
			});<br />
			item.xtype = 'combo';<br />
			item.store = autoStore;<br />
			item.displayField = 'property';<br />
			item.typeAhead = true;<br />
			item.allQuery = 'all';// 查询信息的查询字符串<br />
			item.queryParam = 'keyword';// 查询的名字<br />
			item.mode = 'remote';<br />
			item.minChars = 3;// 默认最少输入4<br />
			item.forceSelection = true;<br />
			item.queryDelay = 0;// 查询延迟时间<br />
			item.triggerAction = 'all';<br />
			item.emptyText = '';<br />
			item.resizable = true;<br />
			item.selectOnFocus = true;<br />
		}<br />
		if (i / row < 1) {<br />
			tempItems1.push(item);<br />
		}<br />
		if (i / row < 2 && i / row >= 1) {<br />
			tempItems2.push(item);<br />
		} else if (i / row >= 2) {<br />
			tempItems3.push(item);<br />
		}<br />
	}<br />
	// alert(Ext.util.JSON.encode(result));</p>

<p>	// 获取表格表头的界面数据和rcord记录的数据格式<br />
	var fields = xmlObj.getElementsByTagName("field");<br />
	result.columnHeaders.push(sm);// 插入多选框<br />
	result.columnHeaders.push(new Ext.grid.RowNumberer({<br />
		width : 20<br />
	}));// 插入行号<br />
	for (var i = 0; i < fields.length; i++) {<br />
		var item = {};<br />
		var record = {};<br />
		var array = [];<br />
		var field = cleanWhitespaces(fields[i]);<br />
		var renderDate = function(value) {<br />
			return value ? value.dateFormat('Y-m-d') : '';<br />
		}<br />
		// 生成grid表格中store数据记录<br />
		record.name = field[0].firstChild.nodeValue;<br />
		record.mapping = field[0].firstChild.nodeValue;<br />
		if (field[1].firstChild.nodeValue == '日期') {<br />
			record.type = 'date';<br />
			record.dateFormat = 'Y-m-d';<br />
			item.renderer = Ext.util.Format.dateRenderer('Y-m-d')<br />
		} else if (field[1].firstChild.nodeValue == '数值') {<br />
			record.type = 'auto';<br />
		} else {<br />
			record.type = 'string';<br />
		}<br />
		result.gridRecords.push(record);</p>

<p>		// 生成grid表格表头数据记录<br />
		item.dataIndex = field[0].firstChild.nodeValue;<br />
		item.header = field[2].firstChild.nodeValue;<br />
		// item.width=field[3].firstChild.nodeValue;<br />
		item.sortable = true;<br />
		if (field.length == 7<br />
				&& field[5].firstChild.nodeValue.toUpperCase() == 'TRUE') {<br />
			item.hidden = true;<br />
			// item.hideable=false;<br />
		}<br />
		if (field.length == 6) {<br />
			item.hidden = false;<br />
		}<br />
		result.columnHeaders.push(item);</p>

<p>		// 生成模糊过滤store的记录<br />
		if (field[4].firstChild.nodeValue.toUpperCase() == 'TRUE') {<br />
			array.push(field[2].firstChild.nodeValue);// fieldName<br />
			array.push(field[0].firstChild.nodeValue);// fieldValue<br />
		}<br />
		result.dbFilterRecords.push(array);<br />
	}<br />
	return result;<br />
};</p>

<p>渲染Ext界面代码：</p>

<p>function initViewport() {<br />
	if (!form) {<br />
		form = getInsertForm();<br />
	}</p>

<p>	if (!grid) {<br />
		grid = getInsertGrid();<br />
	}</p>

<p>	if (!viewport) {<br />
		var formPanel = new Ext.Panel({<br />
			title : '查询条件',<br />
			region : 'north',<br />
			split : true,<br />
			frame : true,<br />
			border : true,<br />
			layout : 'fit',<br />
			height : 280,<br />
			collapsible : true,<br />
			items : [form]</p>

<p>		});<br />
		viewport = new Ext.Viewport({<br />
			layout : 'border',<br />
			modal : true,// 是否为模式窗口<br />
			border : false,<br />
			items : [formPanel, grid]<br />
		});<br />
	}<br />
}</p>

<p>function searchByFilter() {<br />
	var dbfilter = Ext.get("dbFilter").getValue();<br />
	var fieldMame = Ext.get("search-type").getValue();<br />
	if (dbfilter == null || dbfilter == "") {<br />
		alert("请输入一个关键字");<br />
		Ext.get("dbFilter").focus();<br />
	} else if (fieldMame == "==选择过滤字段==") {<br />
		alert("请选择一个过滤字段");<br />
		Ext.get("search-type").focus();<br />
	} else {<br />
		form.getForm().reset();<br />
		if (flag == 1) {<br />
			store.baseParams = {<br />
				dbfilter : dbfilter,<br />
				parentFormValues : getParentFormValues(),<br />
				fieldMame : Ext.get("hiddenValue").dom.value,<br />
				xmlFile : getQueryStringValue('xmlFile'),<br />
				cmd : 'filter'<br />
			};<br />
			store.load({<br />
				params : {<br />
					start : 0,<br />
					limit : result.limit<br />
				}<br />
			});<br />
			form.getForm().reset();<br />
			flag = 0;<br />
		} else {<br />
			store.baseParams = {<br />
				dbfilter : dbfilter,<br />
				parentFormValues : getParentFormValues(),<br />
				fieldMame : Ext.get("hiddenValue").dom.value,<br />
				xmlFile : getQueryStringValue('xmlFile'),<br />
				cmd : 'filter'<br />
			};<br />
			store.reload();</p>

<p>		}<br />
		Ext.get("dbFilter").dom.value = "";<br />
	}<br />
}
// 获取过滤条件部分的表单控件<br />
function getInsertForm() {<br />
	form = new Ext.form.FormPanel({<br />
		name : 'frmMain',<br />
		height : 260,<br />
		labelAlign : 'left',<br />
		labelWidth : 110,<br />
		layout : 'fit',<br />
		waitMsgTarget : true,<br />
		items : [{<br />
			xtype : 'fieldset',<br />
			frame : true,<br />
			title : '高级查询',<br />
			autoHeight : true,<br />
			layout : 'column',<br />
			items : [{<br />
				columnWidth : .333,<br />
				layout : 'form',<br />
				items : tempItems1<br />
			}, {<br />
				columnWidth : .333,<br />
				layout : 'form',<br />
				items : tempItems2<br />
			}, {<br />
				columnWidth : .333,<br />
				layout : 'form',<br />
				items : tempItems3<br />
			}]<br />
		}],<br />
		tbar : ['请输入模糊值: ', ' ', {<br />
			xtype : 'textfield',<br />
			width : 200,<br />
			id : 'dbFilter',<br />
			listeners : {<br />
				specialkey : function(field, e) {<br />
					if (e.getKey() == Ext.EventObject.ENTER) {<br />
						searchByFilter();<br />
					}<br />
				}<br />
			}<br />
		}, '-', {<br />
			xtype : 'combo',<br />
			id : 'search-type',<br />
			anchor : '60%',<br />
			hiddenName : 'hiddenValue',<br />
			width : 120,<br />
			triggerAction : 'all',// 单击触发按钮显示全部数据<br />
			store : new Ext.data.SimpleStore({// 定义组合框中显示的数据源<br />
				fields : ['fieldName', 'fieldValue'],<br />
				data : result.dbFilterRecords<br />
			}),// 设置数据源<br />
			displayField : 'fieldName',// 定义要显示的字段<br />
			valueField : 'fieldValue',// 定义值字段<br />
			mode : 'local',// 本地模式<br />
			forceSelection : true,// 要求输入值必须在列表中存在<br />
			typeAhead : true,// 允许自动选择匹配的剩余部分文本<br />
			// value : '==选择过滤字段==',<br />
			value : '==选择过滤字段==',<br />
			handleHeight : 10<br />
				// 下拉列表中拖动手柄的高度<br />
				}, '-', {<br />
					xtype : 'button',<br />
					text : '筛选',<br />
					tooltip : '先选择查询条件，再输入模糊值',<br />
					iconCls : 'find',<br />
					handler : searchByFilter<br />
				}, '->', {<br />
					pressed : true,<br />
					xtype : 'button',<br />
					text : '确认插入',<br />
					enableToggle : true,<br />
					tooltip : '请选中一行或多行记录，再选择确认插入',<br />
					handler : function() {<br />
						if (sm.hasSelection()) {<br />
							var records = sm.getSelections();<br />
							var jsonObj = "{data:[";<br />
							for (var i = 0; i < records.length; i++) {<br />
								jsonObj += Ext.encode(records[i].data);<br />
								if (i != records.length - 1) {<br />
									jsonObj += ",";<br />
								}<br />
							}<br />
							jsonObj += "]}"<br />
							Ext.Ajax.request({<br />
								url : '../search.do?method=insertChoices',<br />
								method : 'post',<br />
								params : {<br />
									xmlFile : getQueryStringValue('xmlFile')<br />
											.toString(),<br />
									jsonObj : jsonObj,<br />
									parentFormValues : getParentFormValues()<br />
								},<br />
								callback : function(options, success, response) {<br />
									if (response.responseText == "success") {</p>

<p>										Ext.Msg.alert("提示", "插入成功", function() {<br />
											window.close();<br />
											// opener.location.reload();<br />
                                            opener.saveForm();<br />
										});<br />
									} else {<br />
										Ext.Msg.alert("提示", "插入失败");<br />
									}<br />
								}<br />
							})</p>

<p>						} else {<br />
							alert("请选择一行或多行数据");<br />
						}<br />
					},<br />
					scope : this<br />
				}, '-', {<br />
					pressed : true,<br />
					xtype : 'button',<br />
					text : '取消',<br />
					tooltip : '取消选择，直接退出',<br />
					handler : function() {<br />
						Ext.Msg.confirm('Notice', '确认退出？', function(id) {<br />
							if (id == "yes")<br />
								window.close();<br />
						});<br />
					},<br />
					scope : this<br />
				}],<br />
		buttons : [{<br />
			text : '执行查询条件',<br />
			handler : function() {<br />
				var connections = getCondictionValues();<br />
				if (!form.getForm().isValid()) {<br />
					return;<br />
				};<br />
				if (isFormInputed(form.getForm()) == false) {<br />
					alert("请输入查询条件");<br />
					form.getForm().focus();<br />
					return;<br />
				} else {<br />
					Ext.get("dbFilter").dom.value = "";<br />
					if (flag == 1) {<br />
						store.baseParams = {<br />
							xmlFile : getQueryStringValue('xmlFile'),<br />
							condictions : connections,<br />
							parentFormValues : getParentFormValues(),<br />
							cmd : 'search'<br />
						};<br />
						store.load({<br />
							params : {<br />
								start : 0,<br />
								limit : result.limit<br />
							}<br />
						});<br />
						form.getForm().reset();<br />
						flag = 0;<br />
					} else {<br />
						store.baseParams = {<br />
							xmlFile : getQueryStringValue('xmlFile'),<br />
							condictions : connections,<br />
							parentFormValues : getParentFormValues(),<br />
							cmd : 'search'<br />
						};<br />
						store.reload();<br />
					}</p>

<p>					form.getForm().reset();<br />
				}<br />
			}<br />
		}, {<br />
			text : '重置',<br />
			handler : function() {<br />
				form.getForm().reset();<br />
			}<br />
		}]<br />
	});<br />
	return form;<br />
}</p>



	<div class="eof">-<strong>原创文章，转载请注明：</strong>转载自：<a href='/2009/10/22/ext_readxml_in_bjsasc_wuzi.html'>JavaChen Blog</a>-
		<br/>
		<br/>
		<!-- JiaThis Button BEGIN -->
	    <div id="jiathis_style_32x32">
			<a class="jiathis_button_tsina"></a>
			<a class="jiathis_button_tqq"></a>
			<a class="jiathis_button_douban"></a>
			<a class="jiathis_button_googleplus"></a>
			<a class="jiathis_button_evernote"></a>
			<a class="jiathis_button_ujian"></a>
			<a class="jiathis_button_fav"></a>
			<a class="jiathis_button_copy"></a>
			<a class="jiathis_button_ishare"></a>
			<a href="http://www.jiathis.com/share?uid=1352701524431612" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
			<a class="jiathis_counter_style"></a>

			<script type="text/javascript" >
			var jiathis_config={
				data_track_clickback:true,
				summary:"",
				ralateuid:{
					"tsina":"chenzhijun"
				},
				hideMore:false
			}
			</script>
			<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1352701524431612" charset="utf-8"></script>

			<!-- JiaThis Button END -->
			<script type="text/javascript" id="wumiiRelatedItems"></script>
			<script type="text/javascript">
			    var wumiiPermaLink = ""; //请用代码生成文章永久的链接
			    var wumiiTitle = ""; //请用代码生成文章标题
			    var wumiiTags = ""; //请用代码生成文章标签，以英文逗号分隔，如："标签1,标签2"
			    var wumiiSitePrefix = "http://blog.javachen.com/";
			    var wumiiParams = "&num=9&mode=1&pf=JAVASCRIPT";
			</script>
			<script type="text/javascript" src="http://widget.wumii.com/ext/relatedItemsWidget"></script>
			<a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
			    <img src="http://static.wumii.cn/images/pixel.png" alt="无觅相关文章插件，快速提升流量" style="border:0;padding:0;margin:0;" />
			</a>
			<!-- Wumii Related END -->
		</div>
	</div>
	
	<hr/>
	<div class="page fix">
		
		
		<span class="next"><a href="/2011/06/16/touch-cloud-environment-which-it-is-eucalyptus.html">接触云服务环境Eucalyptus →</a></span>
		
	</div>
	<hr/>
</article>

<div id="comment">
	<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"javachen"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
</div>

<script src="/js/jquery-min.js"></script>
<script src="/js/Fullscreen.js"></script>
<script type="text/javascript">
$(function() {
	// =============== 全屏显示 ==================
	(function() {
		var icon = $( 'a.icon-fullscreen' ),
			fs, fsCallback;
		
		fsCallback = function(isFullscreen) {
				if (isFullscreen) {
					icon.addClass('expand').attr('title', 'ESC 退出全屏');
				}
				else {
					icon.removeClass('expand').attr('title', '点击全屏显示');
				}
			};
			
		fs = new Fullscreen({
				element: $('#post'),
				noSafari: true,
				callback: fsCallback
			});

		if (fs.fullscreenEnabled) {
			icon.on('click', function() {
				fs.toggleFullscreen();
				return false;
			});
		}
		else {
			icon.hide();
		}
	})();


	// ============== 目录提取 ===============
	(function() {
		// 设置无目录时，不显示
		if (!parseInt('', 10)) {
			return;
		}

		var dom = $('<fieldset id="catalogue"><legend>目录</legend></fieldset>'),
			count = 0;
		
		$('#post').find('h2,h3,h4,h5').each(function() {
			var name = 'catalogue_' + count++;
			dom.append('<div class="txt_' + this.tagName + '">' +
				'<a href="#' + name + '">' +
					this.innerHTML +
				'</a></div>');
			this.id = name;
		});

		dom.appendTo('body');
	})();
});
</script>
<!-- UJian Button BEGIN -->
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide&btn=4&fade=1&uid=1709061"></script>
<!-- UJian Button END -->


		</section><!--/content end-->

		<footer id="footer">
			<p class="l">
				&copy; 2013 <a href="http://blog.javachen.com">JavaChen</a>. | Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://pages.github.com/">GitHub Pages</a>
			</p>
			<!--Templates from <a href='https://github.com/calefy/calefy.github.com' target='_blank'>calefy</a>.-->
			<p class="r">
				<script language="javascript" type="text/javascript" src="http://js.users.51.la/12111481.js"></script>
<noscript><a href="http://www.51.la/?12111481" target="_blank"><img alt="Statistic" src="http://img.users.51.la/12111481.asp" style="border:none" /></a></noscript>
			</p>
			<p class="tac">
				『纸上得来终觉浅，绝知此事要躬行』
			</p>
		</footer><!--/footer end-->



	</body>
</html>
